# 版本回退指南

本文档说明如何回退到之前的版本。

## 方法一：使用 Git 回退代码版本

### 1. 查看提交历史

```bash
git log --oneline
```

或者查看更详细的信息：

```bash
git log --pretty=format:"%h - %an, %ar : %s"
```

### 2. 回退到指定版本

#### 方式 A：创建新提交（推荐，保留历史）

```bash
git revert <commit-hash>
```

#### 方式 B：回退到指定提交（会丢失后续提交）

```bash
git reset --hard <commit-hash>
```

⚠️ **警告**：使用 `git reset --hard` 会丢失该提交之后的所有更改，请谨慎使用！

### 3. 查看版本标签（如果有）

```bash
git tag
git checkout <tag-name>
```

## 方法二：数据回退

### 1. 备份当前数据

在回退前，务必先备份当前数据：
- 点击"备份数据"按钮导出 JSON 文件
- 或导出 CSV 文件作为备份

### 2. 恢复之前的数据

如果之前有备份文件：
- 点击"恢复数据"按钮
- 选择之前的备份 JSON 文件
- 确认恢复

## 方法三：手动回退

### 1. 查看 CHANGELOG.md

查看 `CHANGELOG.md` 文件，了解各版本的变更内容，确定要回退到的版本。

### 2. 回退代码

```bash
# 查看所有版本标签
git tag -l

# 回退到指定版本（例如 v1.0.0）
git checkout v1.0.0

# 或者回退到指定提交
git checkout <commit-hash>
```

### 3. 重新安装依赖（如果需要）

```bash
npm install
```

### 4. 重新构建

```bash
npm run build
```

## 版本对应关系

| 版本号 | 主要功能 | Git Tag |
|--------|---------|---------|
| 1.2.0 | 批量操作、排序、快捷添加、年度统计等 | - |
| 1.1.0 | 日期筛选、类别统计、月度统计、导入导出 | - |
| 1.0.0 | 基础功能 | - |

## 注意事项

1. **数据安全**：回退代码不会自动回退数据，数据存储在浏览器的 localStorage 中
2. **备份重要**：回退前务必备份当前数据
3. **功能兼容**：回退到旧版本后，新版本的功能将不可用
4. **数据格式**：如果数据格式有变化，可能需要手动调整数据

## 常见问题

### Q: 回退后数据会丢失吗？

A: 不会。数据存储在浏览器的 localStorage 中，回退代码不会影响数据。但如果数据格式在新版本中有变化，可能需要手动处理。

### Q: 如何查看当前版本？

A: 点击页面右下角的版本号按钮，可以查看当前版本信息和更新日志。

### Q: 回退后如何恢复？

A: 使用 `git checkout main`（或 `git checkout master`）切回最新版本即可。

## 联系支持

如有问题，请查看：
- [GitHub Issues](https://github.com/wangmiao033/Duizhang20250115/issues)
- [更新日志](CHANGELOG.md)
